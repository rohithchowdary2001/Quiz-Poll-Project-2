{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import api from'../services/api';// Create context\nimport{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();// Auth provider component\nexport const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[token,setToken]=useState(localStorage.getItem('token'));const[loading,setLoading]=useState(true);// Check if user is authenticated on app load\nuseEffect(()=>{const verifyToken=async()=>{const storedToken=localStorage.getItem('token');if(storedToken){try{// Set token in API headers\napi.defaults.headers.common['Authorization']=`Bearer ${storedToken}`;// Verify token with backend\nconst response=await api.get('/auth/verify');setUser(response.data.user);setToken(storedToken);}catch(error){// Token is invalid, remove it\nlocalStorage.removeItem('token');delete api.defaults.headers.common['Authorization'];setUser(null);setToken(null);}}setLoading(false);};verifyToken();},[]);// Login function\nconst login=async(userData,userToken)=>{try{// Store token\nlocalStorage.setItem('token',userToken);setToken(userToken);// Set token in API headers\napi.defaults.headers.common['Authorization']=`Bearer ${userToken}`;// Store user data\nsetUser(userData);return{success:true};}catch(error){return{success:false,error:error.message};}};// Logout function\nconst logout=()=>{localStorage.removeItem('token');delete api.defaults.headers.common['Authorization'];setUser(null);setToken(null);};// Check if user has specific role\nconst hasRole=requiredRole=>{return(user===null||user===void 0?void 0:user.role)===requiredRole;};// Role check helpers\nconst isAdmin=()=>(user===null||user===void 0?void 0:user.role)==='admin';const isProfessor=()=>(user===null||user===void 0?void 0:user.role)==='professor';const isStudent=()=>(user===null||user===void 0?void 0:user.role)==='student';const value={user,token,loading,login,logout,hasRole,isAdmin,isProfessor,isStudent};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};// Custom hook to use auth context\nexport const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};export default AuthContext;","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","api","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","token","setToken","localStorage","getItem","loading","setLoading","verifyToken","storedToken","defaults","headers","common","response","get","data","error","removeItem","login","userData","userToken","setItem","success","message","logout","hasRole","requiredRole","role","isAdmin","isProfessor","isStudent","value","Provider","useAuth","context","Error"],"sources":["/home/mounikavemula/Documents/PROJECT/quizManagement/frontend/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport api from '../services/api';\n\n// Create context\nconst AuthContext = createContext();\n\n// Auth provider component\nexport const AuthProvider = ({ children }) => {\n    const [user, setUser] = useState(null);\n    const [token, setToken] = useState(localStorage.getItem('token'));\n    const [loading, setLoading] = useState(true);\n\n    // Check if user is authenticated on app load\n    useEffect(() => {\n        const verifyToken = async () => {\n            const storedToken = localStorage.getItem('token');\n            \n            if (storedToken) {\n                try {\n                    // Set token in API headers\n                    api.defaults.headers.common['Authorization'] = `Bearer ${storedToken}`;\n                    \n                    // Verify token with backend\n                    const response = await api.get('/auth/verify');\n                    \n                    setUser(response.data.user);\n                    setToken(storedToken);\n                } catch (error) {\n                    // Token is invalid, remove it\n                    localStorage.removeItem('token');\n                    delete api.defaults.headers.common['Authorization'];\n                    setUser(null);\n                    setToken(null);\n                }\n            }\n            setLoading(false);\n        };\n\n        verifyToken();\n    }, []);\n\n    // Login function\n    const login = async (userData, userToken) => {\n        try {\n            // Store token\n            localStorage.setItem('token', userToken);\n            setToken(userToken);\n            \n            // Set token in API headers\n            api.defaults.headers.common['Authorization'] = `Bearer ${userToken}`;\n            \n            // Store user data\n            setUser(userData);\n            \n            return { success: true };\n        } catch (error) {\n            return { success: false, error: error.message };\n        }\n    };\n\n    // Logout function\n    const logout = () => {\n        localStorage.removeItem('token');\n        delete api.defaults.headers.common['Authorization'];\n        setUser(null);\n        setToken(null);\n    };\n\n    // Check if user has specific role\n    const hasRole = (requiredRole) => {\n        return user?.role === requiredRole;\n    };\n\n    // Role check helpers\n    const isAdmin = () => user?.role === 'admin';\n    const isProfessor = () => user?.role === 'professor';\n    const isStudent = () => user?.role === 'student';\n\n    const value = {\n        user,\n        token,\n        loading,\n        login,\n        logout,\n        hasRole,\n        isAdmin,\n        isProfessor,\n        isStudent,\n    };\n\n    return (\n        <AuthContext.Provider value={value}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n\n// Custom hook to use auth context\nexport const useAuth = () => {\n    const context = useContext(AuthContext);\n    if (!context) {\n        throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n};\n\nexport default AuthContext; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC7E,MAAO,CAAAC,GAAG,KAAM,iBAAiB,CAEjC;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBACA,KAAM,CAAAC,WAAW,cAAGP,aAAa,CAAC,CAAC,CAEnC;AACA,MAAO,MAAM,CAAAQ,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACrC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAACa,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CACjE,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAE5C;AACAC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAgB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC5B,KAAM,CAAAC,WAAW,CAAGL,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAEjD,GAAII,WAAW,CAAE,CACb,GAAI,CACA;AACAhB,GAAG,CAACiB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,CAAG,UAAUH,WAAW,EAAE,CAEtE;AACA,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAApB,GAAG,CAACqB,GAAG,CAAC,cAAc,CAAC,CAE9Cb,OAAO,CAACY,QAAQ,CAACE,IAAI,CAACf,IAAI,CAAC,CAC3BG,QAAQ,CAACM,WAAW,CAAC,CACzB,CAAE,MAAOO,KAAK,CAAE,CACZ;AACAZ,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC,CAChC,MAAO,CAAAxB,GAAG,CAACiB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,CACnDX,OAAO,CAAC,IAAI,CAAC,CACbE,QAAQ,CAAC,IAAI,CAAC,CAClB,CACJ,CACAI,UAAU,CAAC,KAAK,CAAC,CACrB,CAAC,CAEDC,WAAW,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAU,KAAK,CAAG,KAAAA,CAAOC,QAAQ,CAAEC,SAAS,GAAK,CACzC,GAAI,CACA;AACAhB,YAAY,CAACiB,OAAO,CAAC,OAAO,CAAED,SAAS,CAAC,CACxCjB,QAAQ,CAACiB,SAAS,CAAC,CAEnB;AACA3B,GAAG,CAACiB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,CAAG,UAAUQ,SAAS,EAAE,CAEpE;AACAnB,OAAO,CAACkB,QAAQ,CAAC,CAEjB,MAAO,CAAEG,OAAO,CAAE,IAAK,CAAC,CAC5B,CAAE,MAAON,KAAK,CAAE,CACZ,MAAO,CAAEM,OAAO,CAAE,KAAK,CAAEN,KAAK,CAAEA,KAAK,CAACO,OAAQ,CAAC,CACnD,CACJ,CAAC,CAED;AACA,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACjBpB,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC,CAChC,MAAO,CAAAxB,GAAG,CAACiB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,CACnDX,OAAO,CAAC,IAAI,CAAC,CACbE,QAAQ,CAAC,IAAI,CAAC,CAClB,CAAC,CAED;AACA,KAAM,CAAAsB,OAAO,CAAIC,YAAY,EAAK,CAC9B,MAAO,CAAA1B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE2B,IAAI,IAAKD,YAAY,CACtC,CAAC,CAED;AACA,KAAM,CAAAE,OAAO,CAAGA,CAAA,GAAM,CAAA5B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE2B,IAAI,IAAK,OAAO,CAC5C,KAAM,CAAAE,WAAW,CAAGA,CAAA,GAAM,CAAA7B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE2B,IAAI,IAAK,WAAW,CACpD,KAAM,CAAAG,SAAS,CAAGA,CAAA,GAAM,CAAA9B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE2B,IAAI,IAAK,SAAS,CAEhD,KAAM,CAAAI,KAAK,CAAG,CACV/B,IAAI,CACJE,KAAK,CACLI,OAAO,CACPY,KAAK,CACLM,MAAM,CACNC,OAAO,CACPG,OAAO,CACPC,WAAW,CACXC,SACJ,CAAC,CAED,mBACInC,IAAA,CAACC,WAAW,CAACoC,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAhC,QAAA,CAC9BA,QAAQ,CACS,CAAC,CAE/B,CAAC,CAED;AACA,MAAO,MAAM,CAAAkC,OAAO,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAAC,OAAO,CAAG5C,UAAU,CAACM,WAAW,CAAC,CACvC,GAAI,CAACsC,OAAO,CAAE,CACV,KAAM,IAAI,CAAAC,KAAK,CAAC,6CAA6C,CAAC,CAClE,CACA,MAAO,CAAAD,OAAO,CAClB,CAAC,CAED,cAAe,CAAAtC,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}