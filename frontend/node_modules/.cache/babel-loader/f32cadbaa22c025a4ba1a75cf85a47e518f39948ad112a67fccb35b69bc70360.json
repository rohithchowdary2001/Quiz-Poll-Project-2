{"ast":null,"code":"import axios from 'axios';\nimport { toast } from 'react-toastify';\n\n// API base URL\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor to handle errors\napi.interceptors.response.use(response => {\n  return response.data;\n}, error => {\n  // Handle different error scenarios\n  if (error.response) {\n    const {\n      status,\n      data\n    } = error.response;\n    switch (status) {\n      case 401:\n        // Unauthorized - clear token and redirect to login\n        localStorage.removeItem('token');\n        if (window.location.pathname !== '/login') {\n          window.location.href = '/login';\n        }\n        break;\n      case 403:\n        // Forbidden\n        toast.error('Access denied. You do not have permission to perform this action.');\n        break;\n      case 404:\n        // Not found\n        toast.error('Resource not found.');\n        break;\n      case 422:\n        // Validation error\n        if (data.details) {\n          toast.error(data.details);\n        } else {\n          toast.error(data.message || 'Validation error');\n        }\n        break;\n      case 429:\n        // Too many requests\n        toast.error('Too many requests. Please try again later.');\n        break;\n      case 500:\n        // Internal server error\n        toast.error('Server error. Please try again later.');\n        break;\n      default:\n        // Other errors\n        toast.error(data.message || 'An error occurred');\n    }\n  } else if (error.request) {\n    // Network error\n    toast.error('Network error. Please check your connection.');\n  } else {\n    // Other errors\n    toast.error('An unexpected error occurred.');\n  }\n  return Promise.reject(error);\n});\n\n// API endpoints\nexport const endpoints = {\n  // Authentication\n  auth: {\n    login: '/auth/login',\n    register: '/auth/register',\n    logout: '/auth/logout',\n    verify: '/auth/verify',\n    profile: '/auth/profile',\n    changePassword: '/auth/change-password'\n  },\n  // Users\n  users: {\n    list: '/users',\n    get: id => `/users/${id}`,\n    update: id => `/users/${id}`,\n    delete: id => `/users/${id}`,\n    updateRole: id => `/users/${id}/role`,\n    professors: '/users/professors',\n    students: '/users/students',\n    stats: '/users/stats',\n    activity: id => `/users/${id}/activity`\n  },\n  // Classes\n  classes: {\n    list: '/classes',\n    get: id => `/classes/${id}`,\n    create: '/classes',\n    update: id => `/classes/${id}`,\n    delete: id => `/classes/${id}`,\n    students: id => `/classes/${id}/students`,\n    enrollStudent: id => `/classes/${id}/students`,\n    removeStudent: (id, studentId) => `/classes/${id}/students/${studentId}`,\n    stats: id => `/classes/${id}/stats`\n  },\n  // Quizzes\n  quizzes: {\n    list: '/quizzes',\n    get: id => `/quizzes/${id}`,\n    create: '/quizzes',\n    update: id => `/quizzes/${id}`,\n    delete: id => `/quizzes/${id}`,\n    results: id => `/quizzes/${id}/results`,\n    fromTemplate: '/quizzes/from-template'\n  },\n  // Submissions\n  submissions: {\n    start: '/submissions/start',\n    answer: '/submissions/answer',\n    complete: '/submissions/complete',\n    mySubmissions: '/submissions/my-submissions',\n    get: id => `/submissions/${id}`,\n    pollResults: quizId => `/submissions/poll-results/${quizId}`\n  },\n  // Admin\n  admin: {\n    dashboard: '/admin/dashboard',\n    auditLogs: '/admin/audit-logs',\n    analytics: '/admin/analytics',\n    export: '/admin/export',\n    health: '/admin/health',\n    settings: '/admin/settings',\n    cleanup: '/admin/cleanup'\n  }\n};\n\n// Utility functions\nexport const apiUtils = {\n  // Format query parameters\n  formatParams: params => {\n    const searchParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== null && value !== undefined && value !== '') {\n        searchParams.append(key, value);\n      }\n    });\n    return searchParams.toString();\n  },\n  // Handle file download\n  downloadFile: async (url, filename) => {\n    try {\n      const response = await api.get(url, {\n        responseType: 'blob'\n      });\n      const blob = new Blob([response]);\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n    } catch (error) {\n      console.error('Download error:', error);\n      toast.error('Failed to download file');\n    }\n  },\n  // Upload file\n  uploadFile: async (url, file, onProgress) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    try {\n      const response = await api.post(url, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        onUploadProgress: progressEvent => {\n          if (onProgress) {\n            const progress = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n            onProgress(progress);\n          }\n        }\n      });\n      return response;\n    } catch (error) {\n      throw error;\n    }\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","toast","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","data","status","removeItem","window","location","pathname","href","details","message","endpoints","auth","login","register","logout","verify","profile","changePassword","users","list","get","id","update","delete","updateRole","professors","students","stats","activity","classes","enrollStudent","removeStudent","studentId","quizzes","results","fromTemplate","submissions","start","answer","complete","mySubmissions","pollResults","quizId","admin","dashboard","auditLogs","analytics","export","health","settings","cleanup","apiUtils","formatParams","params","searchParams","URLSearchParams","Object","entries","forEach","key","value","undefined","append","toString","downloadFile","url","filename","responseType","blob","Blob","downloadUrl","URL","createObjectURL","link","document","createElement","download","body","appendChild","click","removeChild","revokeObjectURL","console","uploadFile","file","onProgress","formData","FormData","post","onUploadProgress","progressEvent","progress","Math","round","loaded","total"],"sources":["/home/mounikavemula/Documents/PROJECT/quizManagement/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\nimport { toast } from 'react-toastify';\n\n// API base URL\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor to handle errors\napi.interceptors.response.use(\n  (response) => {\n    return response.data;\n  },\n  (error) => {\n    // Handle different error scenarios\n    if (error.response) {\n      const { status, data } = error.response;\n      \n      switch (status) {\n        case 401:\n          // Unauthorized - clear token and redirect to login\n          localStorage.removeItem('token');\n          if (window.location.pathname !== '/login') {\n            window.location.href = '/login';\n          }\n          break;\n          \n        case 403:\n          // Forbidden\n          toast.error('Access denied. You do not have permission to perform this action.');\n          break;\n          \n        case 404:\n          // Not found\n          toast.error('Resource not found.');\n          break;\n          \n        case 422:\n          // Validation error\n          if (data.details) {\n            toast.error(data.details);\n          } else {\n            toast.error(data.message || 'Validation error');\n          }\n          break;\n          \n        case 429:\n          // Too many requests\n          toast.error('Too many requests. Please try again later.');\n          break;\n          \n        case 500:\n          // Internal server error\n          toast.error('Server error. Please try again later.');\n          break;\n          \n        default:\n          // Other errors\n          toast.error(data.message || 'An error occurred');\n      }\n    } else if (error.request) {\n      // Network error\n      toast.error('Network error. Please check your connection.');\n    } else {\n      // Other errors\n      toast.error('An unexpected error occurred.');\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\n// API endpoints\nexport const endpoints = {\n  // Authentication\n  auth: {\n    login: '/auth/login',\n    register: '/auth/register',\n    logout: '/auth/logout',\n    verify: '/auth/verify',\n    profile: '/auth/profile',\n    changePassword: '/auth/change-password',\n  },\n  \n  // Users\n  users: {\n    list: '/users',\n    get: (id) => `/users/${id}`,\n    update: (id) => `/users/${id}`,\n    delete: (id) => `/users/${id}`,\n    updateRole: (id) => `/users/${id}/role`,\n    professors: '/users/professors',\n    students: '/users/students',\n    stats: '/users/stats',\n    activity: (id) => `/users/${id}/activity`,\n  },\n  \n  // Classes\n  classes: {\n    list: '/classes',\n    get: (id) => `/classes/${id}`,\n    create: '/classes',\n    update: (id) => `/classes/${id}`,\n    delete: (id) => `/classes/${id}`,\n    students: (id) => `/classes/${id}/students`,\n    enrollStudent: (id) => `/classes/${id}/students`,\n    removeStudent: (id, studentId) => `/classes/${id}/students/${studentId}`,\n    stats: (id) => `/classes/${id}/stats`,\n  },\n  \n  // Quizzes\n  quizzes: {\n    list: '/quizzes',\n    get: (id) => `/quizzes/${id}`,\n    create: '/quizzes',\n    update: (id) => `/quizzes/${id}`,\n    delete: (id) => `/quizzes/${id}`,\n    results: (id) => `/quizzes/${id}/results`,\n    fromTemplate: '/quizzes/from-template',\n  },\n  \n  // Submissions\n  submissions: {\n    start: '/submissions/start',\n    answer: '/submissions/answer',\n    complete: '/submissions/complete',\n    mySubmissions: '/submissions/my-submissions',\n    get: (id) => `/submissions/${id}`,\n    pollResults: (quizId) => `/submissions/poll-results/${quizId}`,\n  },\n  \n  // Admin\n  admin: {\n    dashboard: '/admin/dashboard',\n    auditLogs: '/admin/audit-logs',\n    analytics: '/admin/analytics',\n    export: '/admin/export',\n    health: '/admin/health',\n    settings: '/admin/settings',\n    cleanup: '/admin/cleanup',\n  },\n};\n\n// Utility functions\nexport const apiUtils = {\n  // Format query parameters\n  formatParams: (params) => {\n    const searchParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== null && value !== undefined && value !== '') {\n        searchParams.append(key, value);\n      }\n    });\n    return searchParams.toString();\n  },\n  \n  // Handle file download\n  downloadFile: async (url, filename) => {\n    try {\n      const response = await api.get(url, { responseType: 'blob' });\n      const blob = new Blob([response]);\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n    } catch (error) {\n      console.error('Download error:', error);\n      toast.error('Failed to download file');\n    }\n  },\n  \n  // Upload file\n  uploadFile: async (url, file, onProgress) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    \n    try {\n      const response = await api.post(url, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n        onUploadProgress: (progressEvent) => {\n          if (onProgress) {\n            const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n            onProgress(progress);\n          }\n        },\n      });\n      return response;\n    } catch (error) {\n      throw error;\n    }\n  }\n};\n\nexport default api; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}