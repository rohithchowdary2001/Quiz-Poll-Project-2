{"ast":null,"code":"import axios from'axios';import{toast}from'react-toastify';// API base URL\nconst API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000/api';// Create axios instance\nconst api=axios.create({baseURL:API_BASE_URL,timeout:10000,headers:{'Content-Type':'application/json'}});// Request interceptor to add auth token\napi.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=`Bearer ${token}`;}return config;},error=>{return Promise.reject(error);});// Response interceptor to handle errors\napi.interceptors.response.use(response=>{return response.data;},error=>{// Handle different error scenarios\nif(error.response){const{status,data}=error.response;switch(status){case 401:// Unauthorized - clear token and redirect to login\nlocalStorage.removeItem('token');if(window.location.pathname!=='/login'){window.location.href='/login';}break;case 403:// Forbidden\ntoast.error('Access denied. You do not have permission to perform this action.');break;case 404:// Not found\ntoast.error('Resource not found.');break;case 422:// Validation error\nif(data.details){toast.error(data.details);}else{toast.error(data.message||'Validation error');}break;case 429:// Too many requests\ntoast.error('Too many requests. Please try again later.');break;case 500:// Internal server error\ntoast.error('Server error. Please try again later.');break;default:// Other errors\ntoast.error(data.message||'An error occurred');}}else if(error.request){// Network error\ntoast.error('Network error. Please check your connection.');}else{// Other errors\ntoast.error('An unexpected error occurred.');}return Promise.reject(error);});// API endpoints\nexport const endpoints={// Authentication\nauth:{login:'/auth/login',register:'/auth/register',logout:'/auth/logout',verify:'/auth/verify',profile:'/auth/profile',changePassword:'/auth/change-password'},// Users\nusers:{list:'/users',get:id=>`/users/${id}`,update:id=>`/users/${id}`,delete:id=>`/users/${id}`,updateRole:id=>`/users/${id}/role`,professors:'/users/professors',students:'/users/students',stats:'/users/stats',activity:id=>`/users/${id}/activity`},// Classes\nclasses:{list:'/classes',get:id=>`/classes/${id}`,create:'/classes',update:id=>`/classes/${id}`,delete:id=>`/classes/${id}`,students:id=>`/classes/${id}/students`,enrollStudent:id=>`/classes/${id}/students`,removeStudent:(id,studentId)=>`/classes/${id}/students/${studentId}`,stats:id=>`/classes/${id}/stats`},// Quizzes\nquizzes:{list:'/quizzes',get:id=>`/quizzes/${id}`,create:'/quizzes',update:id=>`/quizzes/${id}`,delete:id=>`/quizzes/${id}`,results:id=>`/quizzes/${id}/results`,fromTemplate:'/quizzes/from-template'},// Submissions\nsubmissions:{start:'/submissions/start',answer:'/submissions/answer',complete:'/submissions/complete',mySubmissions:'/submissions/my-submissions',get:id=>`/submissions/${id}`,pollResults:quizId=>`/submissions/poll-results/${quizId}`},// Admin\nadmin:{dashboard:'/admin/dashboard',auditLogs:'/admin/audit-logs',analytics:'/admin/analytics',export:'/admin/export',health:'/admin/health',settings:'/admin/settings',cleanup:'/admin/cleanup'}};// Utility functions\nexport const apiUtils={// Format query parameters\nformatParams:params=>{const searchParams=new URLSearchParams();Object.entries(params).forEach(_ref=>{let[key,value]=_ref;if(value!==null&&value!==undefined&&value!==''){searchParams.append(key,value);}});return searchParams.toString();},// Handle file download\ndownloadFile:async(url,filename)=>{try{const response=await api.get(url,{responseType:'blob'});const blob=new Blob([response]);const downloadUrl=window.URL.createObjectURL(blob);const link=document.createElement('a');link.href=downloadUrl;link.download=filename;document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(downloadUrl);}catch(error){console.error('Download error:',error);toast.error('Failed to download file');}},// Upload file\nuploadFile:async(url,file,onProgress)=>{const formData=new FormData();formData.append('file',file);try{const response=await api.post(url,formData,{headers:{'Content-Type':'multipart/form-data'},onUploadProgress:progressEvent=>{if(onProgress){const progress=Math.round(progressEvent.loaded*100/progressEvent.total);onProgress(progress);}}});return response;}catch(error){throw error;}}};// Export as both default and named export\nexport{api};export default api;","map":{"version":3,"names":["axios","toast","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","data","status","removeItem","window","location","pathname","href","details","message","endpoints","auth","login","register","logout","verify","profile","changePassword","users","list","get","id","update","delete","updateRole","professors","students","stats","activity","classes","enrollStudent","removeStudent","studentId","quizzes","results","fromTemplate","submissions","start","answer","complete","mySubmissions","pollResults","quizId","admin","dashboard","auditLogs","analytics","export","health","settings","cleanup","apiUtils","formatParams","params","searchParams","URLSearchParams","Object","entries","forEach","_ref","key","value","undefined","append","toString","downloadFile","url","filename","responseType","blob","Blob","downloadUrl","URL","createObjectURL","link","document","createElement","download","body","appendChild","click","removeChild","revokeObjectURL","console","uploadFile","file","onProgress","formData","FormData","post","onUploadProgress","progressEvent","progress","Math","round","loaded","total"],"sources":["/home/mounikavemula/Documents/PROJECT/quizManagement/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\nimport { toast } from 'react-toastify';\n\n// API base URL\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor to handle errors\napi.interceptors.response.use(\n  (response) => {\n    return response.data;\n  },\n  (error) => {\n    // Handle different error scenarios\n    if (error.response) {\n      const { status, data } = error.response;\n      \n      switch (status) {\n        case 401:\n          // Unauthorized - clear token and redirect to login\n          localStorage.removeItem('token');\n          if (window.location.pathname !== '/login') {\n            window.location.href = '/login';\n          }\n          break;\n          \n        case 403:\n          // Forbidden\n          toast.error('Access denied. You do not have permission to perform this action.');\n          break;\n          \n        case 404:\n          // Not found\n          toast.error('Resource not found.');\n          break;\n          \n        case 422:\n          // Validation error\n          if (data.details) {\n            toast.error(data.details);\n          } else {\n            toast.error(data.message || 'Validation error');\n          }\n          break;\n          \n        case 429:\n          // Too many requests\n          toast.error('Too many requests. Please try again later.');\n          break;\n          \n        case 500:\n          // Internal server error\n          toast.error('Server error. Please try again later.');\n          break;\n          \n        default:\n          // Other errors\n          toast.error(data.message || 'An error occurred');\n      }\n    } else if (error.request) {\n      // Network error\n      toast.error('Network error. Please check your connection.');\n    } else {\n      // Other errors\n      toast.error('An unexpected error occurred.');\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\n// API endpoints\nexport const endpoints = {\n  // Authentication\n  auth: {\n    login: '/auth/login',\n    register: '/auth/register',\n    logout: '/auth/logout',\n    verify: '/auth/verify',\n    profile: '/auth/profile',\n    changePassword: '/auth/change-password',\n  },\n  \n  // Users\n  users: {\n    list: '/users',\n    get: (id) => `/users/${id}`,\n    update: (id) => `/users/${id}`,\n    delete: (id) => `/users/${id}`,\n    updateRole: (id) => `/users/${id}/role`,\n    professors: '/users/professors',\n    students: '/users/students',\n    stats: '/users/stats',\n    activity: (id) => `/users/${id}/activity`,\n  },\n  \n  // Classes\n  classes: {\n    list: '/classes',\n    get: (id) => `/classes/${id}`,\n    create: '/classes',\n    update: (id) => `/classes/${id}`,\n    delete: (id) => `/classes/${id}`,\n    students: (id) => `/classes/${id}/students`,\n    enrollStudent: (id) => `/classes/${id}/students`,\n    removeStudent: (id, studentId) => `/classes/${id}/students/${studentId}`,\n    stats: (id) => `/classes/${id}/stats`,\n  },\n  \n  // Quizzes\n  quizzes: {\n    list: '/quizzes',\n    get: (id) => `/quizzes/${id}`,\n    create: '/quizzes',\n    update: (id) => `/quizzes/${id}`,\n    delete: (id) => `/quizzes/${id}`,\n    results: (id) => `/quizzes/${id}/results`,\n    fromTemplate: '/quizzes/from-template',\n  },\n  \n  // Submissions\n  submissions: {\n    start: '/submissions/start',\n    answer: '/submissions/answer',\n    complete: '/submissions/complete',\n    mySubmissions: '/submissions/my-submissions',\n    get: (id) => `/submissions/${id}`,\n    pollResults: (quizId) => `/submissions/poll-results/${quizId}`,\n  },\n  \n  // Admin\n  admin: {\n    dashboard: '/admin/dashboard',\n    auditLogs: '/admin/audit-logs',\n    analytics: '/admin/analytics',\n    export: '/admin/export',\n    health: '/admin/health',\n    settings: '/admin/settings',\n    cleanup: '/admin/cleanup',\n  },\n};\n\n// Utility functions\nexport const apiUtils = {\n  // Format query parameters\n  formatParams: (params) => {\n    const searchParams = new URLSearchParams();\n    Object.entries(params).forEach(([key, value]) => {\n      if (value !== null && value !== undefined && value !== '') {\n        searchParams.append(key, value);\n      }\n    });\n    return searchParams.toString();\n  },\n  \n  // Handle file download\n  downloadFile: async (url, filename) => {\n    try {\n      const response = await api.get(url, { responseType: 'blob' });\n      const blob = new Blob([response]);\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n    } catch (error) {\n      console.error('Download error:', error);\n      toast.error('Failed to download file');\n    }\n  },\n  \n  // Upload file\n  uploadFile: async (url, file, onProgress) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    \n    try {\n      const response = await api.post(url, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n        onUploadProgress: (progressEvent) => {\n          if (onProgress) {\n            const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n            onProgress(progress);\n          }\n        },\n      });\n      return response;\n    } catch (error) {\n      throw error;\n    }\n  }\n};\n\n// Export as both default and named export\nexport { api };\nexport default api; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}